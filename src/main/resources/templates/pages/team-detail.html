<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">
<head>
    <title th:text="${team.name} + ' ' + (${team.mascot} ?: '')">Team</title>
</head>
<body>

<main layout:fragment="content">

    <!-- Team header -->
    <div class="team-hero">
        <div class="team-hero__logo-wrap"
             th:if="${team.logoUrl}"
             th:style="'background-color: #' + ${team.logoBackgroundColor}">
            <img th:src="${team.effectiveLogoUrl}" th:alt="${team.name}" class="team-hero__logo" />
        </div>
        <div class="team-hero__info">
            <h1 class="team-hero__name" th:text="${team.name}">Alabama</h1>
            <p class="team-hero__mascot" th:text="${team.mascot}">Crimson Tide</p>
            <div class="team-hero__meta">
                <span th:if="${currentConference}" class="team-hero__conference"
                      th:text="${currentConference.name}">SEC</span>
                <a th:if="${team.espnId}" class="team-hero__espn-link"
                   th:href="'https://www.espn.com/mens-college-basketball/team/_/id/' + ${team.espnId} + '/' + (${team.slug} ?: '')"
                   target="_blank" rel="noopener">ESPN</a>
            </div>
        </div>
    </div>

    <!-- Schedule section -->
    <div class="schedule-section" th:if="${!seasons.isEmpty()}">
        <h2 class="schedule-section__title">Schedule</h2>

        <!-- Season tabs -->
        <div class="season-tabs">
            <button th:each="season : ${seasons}"
                    class="season-tabs__tab"
                    th:classappend="${season.year == currentSeasonYear} ? 'season-tabs__tab--active'"
                    th:data-season="${season.year}"
                    th:hx-get="@{'/teams/' + ${teamId} + '/season/' + ${season.year}}"
                    hx-target="#season-content"
                    hx-swap="innerHTML"
                    th:text="${season.year}">2026</button>
        </div>

        <!-- Season content (current season pre-loaded; others loaded on demand via HTMX) -->
        <div id="season-content">
            <div th:replace="~{fragments/team-season :: season-panel}"></div>
        </div>
    </div>

    <div th:if="${seasons.isEmpty()}" class="teams-empty">
        No games found for this team.
    </div>

</main>

</body>
</html>
